# Wallet

This project has been generated by the lagom/lagom-java.g8 template. 

For instructions on running and testing the project, see https://www.lagomframework.com/get-started-java-sbt.html.

        WalletState walletState = state();
        String currency = evt.currency;

        BigDecimal previousAmount = walletState.balances.getOrDefault(currency, new BigDecimal(0.0));
        BigDecimal currentAmount = previousAmount.subtract(evt.amount);


        parametersBuilder.put(currency, currentAmount);

        walletState.balances.entrySet().stream().filter(k -> !k.getKey().equalsIgnoreCase(currency)).forEach(
                entry -> parametersBuilder.put(entry)
        );
        
        //TODO deposit to receiving wallet
       
        PersistentEntityRef entityRef = persistentEntityRegistry.refFor(WalletEntity.class, currencySent.receivingWalletId);
                                            return entityRef.ask(new WalletCommand.Deposit(currencySent.currency, currencySent.amount));